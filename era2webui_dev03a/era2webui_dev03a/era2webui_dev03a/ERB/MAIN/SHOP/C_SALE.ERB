;=============================================================================
;奴隷売却・解放の処理
;=============================================================================
;-------------------------------------------------
;売却・解放キャラの選択
;-------------------------------------------------
@CHARA_SALE
VARSET LOCAL, 0
;表示させるキャラを抽出（LOCAL:2に人数）
CALLF CLEAR_LIST
REPEAT CHARANUM
	MARK:COUNT:98 = 0
	SIF COUNT == MASTER
		CONTINUE
	;パートナーとなっている助手はダメ
	SIF CFLAG:COUNT:3 & 4
		CONTINUE
	;その場にいないキャラは除外
	SIF CFLAG:COUNT:4
		CONTINUE
	SIF TALENT:COUNT:使い魔
		CONTINUE
	IF FLAG:12 & 32
		SIF (CFLAG:COUNT:3 || TALENT:COUNT:烙印 || TALENT:COUNT:使い魔 || TALENT:COUNT:壊造人格) && CFLAG:COUNT:20 & 16
			CONTINUE
	ELSE
		SIF CFLAG:COUNT:3 || TALENT:COUNT:烙印 || TALENT:COUNT:使い魔 || TALENT:COUNT:壊造人格 || CFLAG:COUNT:1 == 0
			CONTINUE
	ENDIF

	CALLF SET_LIST, LOCAL:2, COUNT
	LOCAL:2 += 1
	MARK:COUNT:98 = 1
REND
LOCAL:1 = (LOCAL:2 - 1) / 20

$PRINT_LIST
DRAWLINE
PRINTFORML \@(FLAG:12 & 32) ? 誰を売却・解放し # 誰を売り\@ますか？ ＜page.{LOCAL+1}/{LOCAL:1+1}＞
DRAWLINE
CALL SALE_LIST, LOCAL
IF FLAG:17 & 4
	LOADGLOBAL
	ALIGNMENT RIGHT
	IF STRLENS(GLOBALS:150) > 0
		PRINTL ※市場キャラクター数が上限に達しています。登録せずに選択されます　　
	ELSE
		PRINTFORML  [1005] 市場登録(現在:\@(FLAG:17 & 8) ? 有効 # 無効\@)　　
	ENDIF
	ALIGNMENT LEFT
ENDIF
DRAWLINE
PRINTFORMLC \@(LOCAL <= 0) ? %" " * 16% # [1001]前のページ\@
PRINTLC [1000]戻る
PRINTFORMLC \@(LOCAL >= LOCAL:1) ? %" " * 16% # [1009]次のページ\@
PRINTL 
$INPUT_LOOP
INPUT
IF RESULT == 1005 && FLAG:17 & 4 && STRLENS(GLOBALS:150) <= 0
	FLAG:17 ^= 8
	RESTART
ELSEIF RESULT == 1000
	RETURN 0
ELSEIF RESULT == 1001 && LOCAL > 0
	LOCAL -= 1
	GOTO PRINT_LIST
ELSEIF RESULT == 1009 && LOCAL < LOCAL:1
	LOCAL += 1
	GOTO PRINT_LIST
ELSEIF RESULT <= 0 || RESULT >= CHARANUM || MARK:RESULT:98 == 0
	GOTO INPUT_LOOP
ENDIF

LOCAL = RESULT
IF FLAG:12 & 32
	IF NO:LOCAL == 5001
		SIF FLAG:570 & 16
			PRINTFORMW ※この奴隷を売却、または解放すると、%CALLNAME:MASTER%は【触手使役術】を失います
		SIF FLAG:570 & 32
			PRINTFORMW ※この奴隷を売却、または解放すると、%CALLNAME:MASTER%の触手使役Lvが{FLAG:572}に下がります
	ENDIF
	SIF NO:MASTER == 5000 && NO:LOCAL == 5002 && FLAG:570 & 4
		PRINTW ※この奴隷を売却、または解放すると、奴隷の購入及び売却に制限がつくようになります
	CALL SALE_SELECT, LOCAL
ELSE
	IF NO:LOCAL == 5001
		SIF FLAG:570 & 16
			PRINTFORMW ※この奴隷を売却すると、%CALLNAME:MASTER%は【触手使役術】を失います
		SIF FLAG:570 & 32
			PRINTFORMW ※この奴隷を売却すると、%CALLNAME:MASTER%の触手使役Lvが{FLAG:572}に下がります
	ENDIF
	SIF NO:MASTER == 5000 && NO:LOCAL == 5002 && FLAG:570 & 4
		PRINTW ※この奴隷を売却すると、奴隷の購入及び売却に制限がつくようになります
	CALL SALE_CONFIRM, LOCAL
ENDIF

IF FLAG:570 & 8
	FLAG:570 &= 55
	FLAG:0 = 1
	BEGIN TURNEND
	RETURN 1
ENDIF

RESTART

;-------------------------------------------------
;売却・解放キャラの一覧
;-------------------------------------------------
@SALE_LIST, ARG
REPEAT 20
	LOCAL = GET_LIST(COUNT + ARG * 20)
	SIF LOCAL == 0
		CONTINUE

	CALL ARRANGE_CHARALIST, LOCAL
	IF ASSI == LOCAL
		PRINT  (助手)
	ELSEIF ISASSI:LOCAL == 1
		PRINT (元助手)
	ELSEIF CFLAG:LOCAL:1 == 2
		PRINT (助手可)
	ENDIF
	PRINTL 
REND

;-------------------------------------------------
;売却・解放の選択
;-------------------------------------------------
@SALE_SELECT, ARG
PRINTL 
SIF CFLAG:ARG:1 >= 1 && CFLAG:ARG:3 == 0 && TALENT:ARG:烙印 == 0 && TALENT:ARG:使い魔 == 0 && TALENT:ARG:壊造人格 == 0 && FLAG:4 != 4
	PRINTFORML [0]売却する
IF TALENT:ARG:死亡 && TALENT:ARG:使い魔 == 0
	PRINTFORML [1]遺棄する
ELSEIF (CFLAG:ARG:20 & 16) == 0 && TALENT:ARG:使い魔 == 0
	PRINTFORML [1]解放する
ENDIF
PRINTFORML [100] 戻る
$INPUT_LOOP
INPUT
IF RESULT == 100
	RETURN 0
ELSEIF RESULT == 0 && CFLAG:ARG:1 >= 1 && CFLAG:ARG:3 == 0 && TALENT:ARG:烙印 == 0 && TALENT:ARG:使い魔 == 0 && TALENT:ARG:壊造人格 == 0 && FLAG:4 != 4
	CALL SALE_CONFIRM, ARG
ELSEIF RESULT == 1 && (TALENT:ARG:死亡 || (CFLAG:ARG:20 & 16) == 0) && TALENT:ARG:使い魔 == 0
	CALL CHARA_RELEASE, ARG
ELSE
	GOTO INPUT_LOOP
ENDIF

;-------------------------------------------------
;キャラ解放処理
;-------------------------------------------------
@CHARA_RELEASE, ARG
;調教対象及び助手の登録番号保存
LOCAL:1 = TARGET
LOCAL:2 = ASSI
DRAWLINE
;解放され立ち去る奴隷のイベント口上呼び出し(解放直後)
CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, ARG, 196
PRINTW ………………
PRINTW …………
PRINTW ……
;精神崩壊or傀儡or睡眠薬効果発揮中
IF TALENT:ARG:精神崩壊 || TALENT:ARG:傀儡 || TALENT:ARG:死亡 || EQUIP:ARG:睡眠薬
	FLAG:67 += 1

	;対象or助手の売却・解放による登録削除処理
	CALL CHARA_GONE, ARG, LOCAL:1, LOCAL:2, 1
;妄信or親愛or隷属or主人が謎の魅力かつ恋慕＋反発刻印3
ELSEIF ((TALENT:MASTER:謎の魅力 && TALENT:ARG:恋慕) || TALENT:ARG:妄信 || TALENT:ARG:親愛 || TALENT:ARG:隷属) && MARK:ARG:反発刻印 == 3
	;戻ってきた反発奴隷のイベント口上呼び出し
	CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, ARG, 192
	PRINTFORMW ＜%CALLNAME:ARG%は反発刻印を失いました＞
	MARK:ARG:反発刻印 = 0
	CFLAG:ARG:20 |= 16
	TARGET = LOCAL:1
;妄信or親愛or相愛or隷属or壊造人格or主人が謎の魅力かつ恋慕＋淫乱or淫魔
ELSEIF ((TALENT:MASTER:謎の魅力 && TALENT:ARG:恋慕) || TALENT:ARG:妄信 || TALENT:ARG:親愛 || TALENT:ARG:相愛 || TALENT:ARG:隷属 || TALENT:ARG:壊造人格) && (TALENT:ARG:淫乱 || TALENT:ARG:淫魔)
	CALL RETURN_PLUS, ARG
	CFLAG:ARG:20 |= 16
;妄信or親愛or相愛or隷属or烙印or主人が謎の魅力かつ恋慕
ELSEIF (TALENT:MASTER:謎の魅力 && TALENT:ARG:恋慕) || TALENT:ARG:妄信 || TALENT:ARG:親愛 || TALENT:ARG:相愛 || TALENT:ARG:烙印 || TALENT:ARG:隷属
	;戻ってきた奴隷のイベント口上呼び出し
	CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, ARG, 193
	IF TALENT:ARG:弱味 == 0
		PRINTFORMW %CALLNAME:ARG%は[弱味]を得た
		TALENT:ARG:弱味 = 1
		CFLAG:ARG:12 |= 1024
	ENDIF
	CFLAG:ARG:20 |= 16
;反発刻印3で主人が[呪精][蓬莱人]を持ってない場合
ELSEIF MARK:ARG:反発刻印 >= 3 && TALENT:MASTER:呪精 == 0 && TALENT:MASTER:蓬莱人 == 0
	CALL BADEND_9, ARG
ELSE
	FLAG:67 += 1

	;対象or助手の売却・解放による登録削除処理
	CALL CHARA_GONE, ARG, LOCAL:1, LOCAL:2, 1
ENDIF

;-------------------------------------------------
;解放したキャラが新しい奴隷や資金を調達する処理
;-------------------------------------------------
@RETURN_PLUS, ARG
VARSET LOCAL, 0
;戻った後RESTARTで再構築されるので、汎用リストを使ってもOK
CALLF CLEAR_LIST

;購入可能な奴隷の人数の確認
LOCAL:1 = CALC_SLAVE_CAPACITY()

;キャラ数が上限を超えていない場合
IF CHARANUM < LOCAL:1
	;奴隷の値段を取得
	CALL CHARA_BUY_PRICE
	FOR LOCAL:10, 1, 6
		FOR PC_VAR1, 0, 120
			;相性が100より上で値段が1以上
			IF CSVRELATION(NO:ARG, 1000 * LOCAL:10 + PC_VAR1, 0) > 100 && ITEMSALES:(1000 * LOCAL:10 + PC_VAR1) > 0
				CALLF SET_LIST, LOCAL:2, (1000 * LOCAL:10 + PC_VAR1)
				LOCAL:2 += 1
			ENDIF
		NEXT
	NEXT
ENDIF

PRINTL 
;汎用リストの0～147に所持していない相性のいいキャラのキャラ番号、LOCAL:2はその人数
IF LOCAL:2 > 0 && FLAG:4 < 50
	LOCAL:3 = GET_LIST(RAND:(LOCAL:2))
	CFLAG:ARG:155 |= 4
	PRINTFORMW %CALLNAME:ARG%は%CSVNAME((LOCAL:3), 0)%を連れてきた
	;調教対象を記憶
	LOCAL:4 = TARGET
	;キャラの追加
	CALL CHARA_STATE_BASIC, LOCAL:3
	;連れてこられた日を記録
	CFLAG:連れてこられた日 = DAY
	;誰に連れてこられたかを記録
	CFLAG:3118 = CFLAG:ARG:3109
	;入手方法の記録
	CSTR:3 = %CALLNAME:ARG%に連れて来られた。
	;初期経験に緊縛経験・薬物経験・異常経験を追加
	EXP:緊縛経験 += 12
	EXP:薬物経験 += 3
	CALL abn_exp(TARGET, 26, 0, 1, 1, 0)
	;連れて来られた側の口上での特殊初期設定処理用の命令呼び出し
	CALL CHARA_EXTRA_INITIALIZATION, TARGET
	;奴隷を連れてきたイベント口上呼び出し(TFLAG:99に誰をつれてきたかを入れておく)
	CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, ARG, 190, TARGET
	;連れて来られた側のイベント口上呼び出し(TFLAG:99に誰につれてこられたかを入れておく)
	CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, TARGET, 199, ARG
	;調教対象を元に戻す
	TARGET = LOCAL:4
ELSE
	;資金を調達してきたイベント口上呼び出し
	CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, ARG, 191
	PRINTFORMW %CALLNAME:ARG%はどこからか1萬圓の資金を調達してきた
	MONEY += 10000
ENDIF

;-------------------------------------------------
;対象or助手の売却・解放による登録削除処理
;-------------------------------------------------
@CHARA_GONE, ARG, ARG:1, ARG:2, ARG:3 = 0
;解放され立ち去る奴隷のイベント口上呼び出し
CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, ARG, 195, TFLAG:200

IF CFLAG:ARG:4 == 0
	IF !ARG:3 && RAND:100 != 0 && FLAG:17 & 8 && !TALENT:ARG:育児中 && !TALENT:ARG:抱卵中 && !TALENT:ARG:懐卵 && TALENT:ARG:理性 && !TALENT:ARG:死亡 && STRLENS(GLOBALS:150) <= 0
		;睡眠薬の効力を失う
		EQUIP:ARG:睡眠薬 = 0
		;主人
		IF MASTER_CHECK(ARG) == 1
			;記憶
			;元主人調教経験
			CFLAG:ARG:3670 = EXP:ARG:主人調教経験
			;元別人調教経験
			CFLAG:ARG:3671 = EXP:ARG:別人調教経験
			;元好感度
			CFLAG:ARG:3672 = CFLAG:ARG:好感度
			;元反発刻印
			CFLAG:ARG:3676 = MARK:ARG:反発刻印
			;元主人と口同士でキスした回数
			CFLAG:ARG:3680 = CFLAG:ARG:主人と調教キス数
			;元主人にペニスでＶを犯された回数
			CFLAG:ARG:3681 = CFLAG:ARG:主人にＶ捧げ回数
			;元主人にペニスでＡを犯された回数
			CFLAG:ARG:3682 = CFLAG:ARG:主人にＡ捧げ回数
			;元主人のＶをペニスで犯した回数
			CFLAG:ARG:3683 = CFLAG:ARG:主人のＶ犯し回数
			;元主人のＡをペニスで犯した回数
			CFLAG:ARG:3684 = CFLAG:ARG:主人のＡ犯し回数
		ENDIF
		EXP:ARG:主人調教経験 = 0
		CFLAG:ARG:454 ++
		CFLAG:ARG:3668 = LIMIT(CFLAG:ARG:3668 - CFLAG:ARG:好感度 / 2, -1000, 1000)
		;調教者
		CALL TRAINER_CHANGE, ARG
		;移動
		CALL CHARA_RESERVE, ARG
	ENDIF
	CALL IRC_CHARA_GONE, ARG
	DELCHARA ARG
ENDIF

IF ARG:1 < 0 || ARG:1 == ARG
	TARGET = -1
ELSE
	TARGET = (ARG:1 > ARG) ? (ARG:1 - 1) # ARG:1
ENDIF
IF ARG:2 < 0 || ARG:2 == ARG
	ASSI = -1
ELSE
	ASSI = (ARG:2 > ARG) ? (ARG:2 - 1) # ARG:2
ENDIF

;-------------------------------------------------
;売却処理
;-------------------------------------------------
@SALE_CONFIRM, ARG
#DIM original_price
LOCAL = 0
LOCAL:1 = TARGET
LOCAL:2 = ASSI
LOCAL:3 = 0
;売値の計算
CALL SALE_CHARA(ARG)
LOCAL = MAX(RESULT, 0)
original_price = MAX(RESULT:1*RESULT:2/10000, 0)

;売却確認
IF original_price == LOCAL
	PRINTFORML %CALLNAME:ARG%は{LOCAL}圓で売れそうです。
ELSE
	PRINTFORML %CALLNAME:ARG%は査定では{original_price}圓と評価されているものの、
	PRINTFORML 諸々のことを加味して{LOCAL}圓で売れそうです。
ENDIF

;デバッグモードでは売値の基礎値・倍率補正(カンスト前の分のみ)を表示
SIF TALENT:MASTER:998
	PRINTFORML ※{RESULT:1}圓(奴隷の売値の基礎値) × {(RESULT:2)/10000}\@((RESULT:2)%10000/10 < 100) ? .0 # .\@{((RESULT:2)%10000/10)}(基礎Buy率補正) × α(その他の補正)
SIF FLAG:570 & 2
	PRINTL ※奴隷商人がいないため、売却後時間が経過します
IF NO:MASTER == 5000 && (FLAG:570 & 6) == 0
	SIF NO:ARG == 5001 || NO:ARG == 5003 || (NO:ARG == 1001 && CFLAG:ARG:0 == 2)
		PRINTL ※売却後時間が経過します
ENDIF
PRINTL 売却しますか？
PRINTL [0] はい
PRINTL [1] いいえ
$INPUT_LOOPSALE
INPUT
IF RESULT == 0
	IF !TALENT:ARG:死亡 && TALENT:ARG:狂気 && EQUIP:ARG:睡眠薬 == 0 && (TALENT:ARG:相愛 || ((TALENT:ARG:妄信 || TALENT:ARG:嫉妬) && TALENT:ARG:服従 == 0 && TALENT:ARG:淫乱 == 0 && ABL:ARG:従順 < 5))
		TIMES LOCAL , 0.10
		PRINTFORML \@(TFLAG:207) ? %CALLNAME:ARG%は輸送時に破壊暴走して失踪しました # 輸送時に破壊暴走し失踪 ×0.10\@
		IF TALENT:ARG:恋慕 && TALENT:ARG:狂気
			CFLAG:ARG:1 = 0
			CFLAG:ARG:4 = 1
			LOCAL:3 = 1
		ENDIF
		;狂気脱走時の口上用
		TFLAG:200 = 180
	ELSE
		;通常売却時の口上用
		TFLAG:200 = 130
	ENDIF
	LOCAL = MAX(LOCAL, 0)
	;売却拒否パッチ追加
	;一応、リセット
	TFLAG:0 = 0

	;「売却時口上表示」が有効である
	SIF FLAG:12 & 8192
		CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, ARG, TFLAG:200, LOCAL

	;売却拒否パッチ追加
	IF TFLAG:0 == 1
		;一応、掃除
		TFLAG:0 = 0
		RETURN 1
	ENDIF

	CALL OUTPUT_TXT("奴隷売却",ARG)
	;売却額
	PRINTFORMW 結果、%CALLNAME:ARG%は{LOCAL}圓で売れました。
	MONEY += LOCAL
	;中古
	;IF CFLAG:ARG:454 <= 0
		FLAG:34 += 1
		FLAG:66 += 1
	;ENDIF
	
	;--------------------------------------------------
	;奴隷売却で稼いだ最高金額判定処理
	MONEY:1 = LOCAL
	SIF MONEY:1 > MONEY:997
		CALL NEW_HIGH_INCOME_ALL, 997
	;奴隷売却で稼いだ金額加算処理(1京圓までカウント)
	SIF MONEY:990 < 10000000000000000
		CALL INCOME_SLAVE_SALE, 990
	;売値25万圓以上の高級奴隷売却で稼いだ金額加算処理(1京圓までカウント)
	SIF MONEY:991 < 10000000000000000 && MONEY:1 >= 250000
		CALL INCOME_SLAVE_SALE, 991
	;--------------------------------------------------
	;売却後エピソード登録処理
	CALL SET_AFTERWARDS, ARG

	IF FLAG:570 & 2
		FLAG:570 |= 8
	ELSEIF NO:MASTER == 5000 && (FLAG:570 & 6) == 0
		SIF NO:ARG == 5001 || NO:ARG == 5003 || (NO:ARG == 1001 && CFLAG:ARG:0 == 2)
			FLAG:570 |= 8
	ENDIF

	;刻符
	SIF FLAG:3 == 6 || FLAG:3 == 7
		CALL TIME_LIMIT_BONUS, ARG, LOCAL

	IF LOCAL:3 == 0
		;対象or助手の売却・解放による登録削除処理
		CALL CHARA_GONE, ARG, LOCAL:1, LOCAL:2
	ELSE
		TARGET = (ARG == TARGET) ? -1 # TARGET
	ENDIF
ELSEIF RESULT != 1
	GOTO INPUT_LOOPSALE
ENDIF
TFLAG:207 = 0

;-------------------------------------------------
;キャラの売却による準売却（保管登録）
;キャラの圧縮
;ARG = 対象
;ARG:1 = 1:NPC
;-------------------------------------------------
@CHARA_RESERVE, ARG
#DIM check
check = 0
TFLAG:207 = 1

FOR LOCAL, 101, 151
	SIF STRLENS(GLOBALS:LOCAL) > 0
		CONTINUE
	GLOBALS:LOCAL += @"%CALLNAME:ARG%_"
	GLOBALS:LOCAL += @"{NO:ARG}_"
	
	;売値の計算
	CALL SALE_CHARA(ARG)
	LOCAL:1 = RESULT
	;中古
	SIF CFLAG:ARG:454 > 0
		TIMES LOCAL:1 , 1.50
	;主人の調教師LV
	SELECTCASE ABL:MASTER:調教師Lv
		CASE 0
		CASE 1
			TIMES LOCAL:1 , 0.75
		CASE 2
			TIMES LOCAL:1 , 0.60
		CASE 3
			TIMES LOCAL:1 , 0.50
		CASE 4
			TIMES LOCAL:1 , 0.45
		CASEELSE
			TIMES LOCAL:1 , 0.40
	ENDSELECT
	;YASAIモードのキャラ限定
	SIF ((NO:ARG == 5001 || NO:ARG == 5003 || (NO:ARG == 1001 && CFLAG:ARG:0 == 2)) && NO:MASTER == 5000 && (FLAG:570 & 4) == 0) || FLAG:570 & 2
		TIMES LOCAL:1 , 2.00
	LOCAL:1 = MAX(LOCAL:1, ITEMPRICE:(NO:ARG))

	SIF ((NO:ARG >= 3000 && NO:ARG <= 3100) || NO:ARG == 2048 || NO:ARG == 2049) && LOCAL:1 < 5000
		LOCAL:1 = 5000
	
	GLOBALS:LOCAL += @"{LOCAL:1}_"
	
	FOR check, 0, VARSIZE("BASE")
		SIF BASE:ARG:check
			GLOBALS:LOCAL += @"{check},{BASE:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	FOR check, 0, VARSIZE("MAXBASE")
		SIF MAXBASE:ARG:check
			GLOBALS:LOCAL += @"{check},{MAXBASE:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	
	FOR check, 0, VARSIZE("CSTR")
		SIF STRLENS(CSTR:ARG:check)
			GLOBALS:LOCAL += @"{check},%CSTR:ARG:check%//"
	NEXT
	GLOBALS:LOCAL += "_"
	
	FOR check, 0, VARSIZE("ABL")
		SIF ABL:ARG:check
			GLOBALS:LOCAL += @"{check},{ABL:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	FOR check, 0, VARSIZE("CFLAG")
		SIF CFLAG:ARG:check
			GLOBALS:LOCAL += @"{check},{CFLAG:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	FOR check, 0, VARSIZE("TALENT")
		SIF TALENT:ARG:check
			GLOBALS:LOCAL += @"{check},{TALENT:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	
	FOR check, 0, VARSIZE("EQUIP")
		SIF EQUIP:ARG:check
			GLOBALS:LOCAL += @"{check},{EQUIP:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	
	FOR check, 0, VARSIZE("EXP")
		SIF EXP:ARG:check
			GLOBALS:LOCAL += @"{check},{EXP:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	FOR check, 0, VARSIZE("MARK")
		SIF MARK:ARG:check
			GLOBALS:LOCAL += @"{check},{MARK:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	FOR check, 0, VARSIZE("JUEL")
		SIF JUEL:ARG:check
			GLOBALS:LOCAL += @"{check},{JUEL:ARG:check}/"
	NEXT
	GLOBALS:LOCAL += "_"
	
	;取り置き
	GLOBALS:LOCAL += @"{CFLAG:ARG:909}_"
	
	BREAK
NEXT
SAVEGLOBAL
TFLAG:207 = 0

;=============================================================================
;キャラ売値計算処理
;=============================================================================
;キャラの売値をここで算出
@SALE_CHARA, ARG
VARSET LOCAL, 0
VARSET LOCALS, ""

IF !TFLAG:207
	;ヤンデレもーど有効のときで睡眠薬の影響なければTALENT:恋慕をみる
	IF FLAG:14 & 4 && TALENT:ARG:恋慕 && EQUIP:ARG:睡眠薬 == 0 && TALENT:ARG:服従 == 0 && TALENT:ARG:使い魔 == 0 && TALENT:ARG:精神崩壊 == 0 && TALENT:ARG:傀儡 == 0 && TALENT:ARG:壊造人格 == 0
		PRINTFORMW %CALLNAME:ARG%は、売却されることに激しく狼狽した。
		;激しく狼狽する奴隷のイベント口上呼び出し
		CALL DISPLAY_KOJO_MESSAGE_SUB_EVENT, ARG, 194
		;反発刻印LV3を取得
		IF MARK:ARG:97 <= 2 && MARK:ARG:反発刻印 <= 2
			CALL COMMON_MARK_UP, ARG, 9, 3, 0
			;感情乏しいの場合は反発刻印による従順ダウンはなし
			IF ABL:ARG:従順 > 1 && ABL:ARG:従順 < 5 && TALENT:ARG:感情乏しい == 0
				ABL:ARG:従順 -= 2
				SIF ABL:ARG:従順 < 0
					ABL:ARG:従順 = 0
				PRINTFORML そして従順が{ABL:従順}に下がった
			ENDIF
		ENDIF
		;気丈でなく、まだ狂気でない場合、狂気を得る
		IF TALENT:ARG:気丈 == 0 && TALENT:ARG:狂気 == 0
			CFLAG:ARG:12 |= 1
			CFLAG:ARG:17 |= 2
			TALENT:ARG:狂気 = 1
			PRINTFORMW %CALLNAME:ARG%は明後日の方向を向き、薄ら笑いを浮かべながらブツブツと呟いている…
			PRINTFORML %CALLNAME:ARG%は既に正気を失ったようだ…
			PRINTFORMW %CALLNAME:ARG%は[狂気]を得た
			IF TALENT:ARG:理性
				MAXBASE:ARG:9 = MAX(MAXBASE:ARG:9 / 2, 1)
				SIF BASE:ARG:理性 > MAXBASE:ARG:9
					BASE:ARG:理性 = MAXBASE:ARG:9
			ENDIF
		ENDIF
	ENDIF
ENDIF

;難易度PHANTASMのとき表示なし
SIF FLAG:3 >= 5 && TFLAG:207 == 0 && !TALENT:MASTER:超常目算
	TFLAG:207 = 1

;キャラの原価の1/6をベースとする
LOCAL = MAX(ITEMPRICE:(NO:ARG) / 6, 100)
SIF !TFLAG:207
	PRINTFORML %ITEMNAME:(NO:ARG)%({LOCAL}圓)
LOCAL:1 += LOCAL

;ABL:Ｃ感覚をみる
IF ABL:ARG:Ｃ感覚 < 3
	LOCAL = 0
ELSEIF ABL:ARG:Ｃ感覚 == 3
	LOCAL = 250
ELSEIF ABL:ARG:Ｃ感覚 == 4
	LOCAL = 400
ELSE
	LOCAL = 600
ENDIF
;[淫核／淫茎]
SIF TALENT:ARG:淫核／淫茎
	TIMES LOCAL , 1.50
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:0, 13, RIGHT%LV{ABL:ARG:Ｃ感覚} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:Ｖ感覚をみる
IF ABL:ARG:Ｖ感覚 < 2
	LOCAL = 0
ELSEIF ABL:ARG:Ｖ感覚 == 2
	LOCAL = 250
ELSEIF ABL:ARG:Ｖ感覚 == 3
	LOCAL = 500
ELSEIF ABL:ARG:Ｖ感覚 == 4
	LOCAL = 1000
ELSE
	LOCAL = 1500
ENDIF
;[淫壷]
SIF TALENT:ARG:淫壷
	TIMES LOCAL , 1.50
IF LOCAL > 0 && TALENT:ARG:オトコ == 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:1, 13, RIGHT%LV{ABL:ARG:Ｖ感覚} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:Ａ感覚をみる
IF ABL:ARG:Ａ感覚 < 2
	LOCAL = 0
ELSEIF ABL:ARG:Ａ感覚 == 2
	LOCAL = 200
ELSEIF ABL:ARG:Ａ感覚 == 3
	LOCAL = 400
ELSEIF ABL:ARG:Ａ感覚 == 4
	LOCAL = 700
ELSE
	LOCAL = 1000
ENDIF
;[淫尻]
SIF TALENT:ARG:淫尻
	TIMES LOCAL , 1.50
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:2, 13, RIGHT%LV{ABL:ARG:Ａ感覚} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:Ｂ感覚をみる
IF ABL:ARG:Ｂ感覚 < 3
	LOCAL = 0
ELSEIF ABL:ARG:Ｂ感覚 == 3
	LOCAL = 320
ELSEIF ABL:ARG:Ｂ感覚 == 4
	LOCAL = 480
ELSE
	LOCAL = 640
ENDIF
;[淫乳]
SIF TALENT:ARG:淫乳
	TIMES LOCAL , 1.50
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:3, 13, RIGHT%LV{ABL:ARG:Ｂ感覚} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF

;ABL:従順をみる
IF ABL:ARG:従順 == 0
	LOCAL = 0
ELSEIF ABL:ARG:従順 == 1
	LOCAL = 500
ELSEIF ABL:ARG:従順 == 2
	LOCAL = 850
ELSEIF ABL:ARG:従順 == 3
	LOCAL = 1500
ELSEIF ABL:ARG:従順 == 4
	LOCAL = 2500
ELSE
	LOCAL = 3500
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:10, 13, RIGHT%LV{ABL:ARG:従順} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:欲望をみる
IF ABL:ARG:欲望 == 0
	LOCAL = 0
ELSEIF ABL:ARG:欲望 == 1
	LOCAL = 200
ELSEIF ABL:ARG:欲望 == 2
	LOCAL = 450
ELSEIF ABL:ARG:欲望 == 3
	LOCAL = 900
ELSEIF ABL:ARG:欲望 == 4
	LOCAL = 1500
ELSE
	LOCAL = 2400
ENDIF
;[永久発情]
SIF TALENT:ARG:常時発情
	TIMES LOCAL , 1.50
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:11, 13, RIGHT%LV{ABL:ARG:欲望} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:技巧をみる
IF ABL:ARG:技巧 == 0
	LOCAL = 0
ELSEIF ABL:ARG:技巧 == 1
	LOCAL = 150
ELSEIF ABL:ARG:技巧 == 2
	LOCAL = 300
ELSEIF ABL:ARG:技巧 == 3
	LOCAL = 600
ELSEIF ABL:ARG:技巧 == 4
	LOCAL = 1000
ELSE
	LOCAL = 1800
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:12, 13, RIGHT%LV{ABL:ARG:技巧} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:奉仕精神をみる
IF ABL:ARG:奉仕精神 == 0
	LOCAL = 0
ELSEIF ABL:ARG:奉仕精神 == 1
	LOCAL = 500
ELSEIF ABL:ARG:奉仕精神 == 2
	LOCAL = 900
ELSEIF ABL:ARG:奉仕精神 == 3
	LOCAL = 1400
ELSEIF ABL:ARG:奉仕精神 == 4
	LOCAL = 2100
ELSE
	LOCAL = 3000
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:13, 13, RIGHT%LV{ABL:ARG:奉仕精神} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:露出癖をみる
IF ABL:ARG:露出癖 == 0
	LOCAL = 500
ELSEIF ABL:ARG:露出癖 == 1
	LOCAL = 200
ELSEIF ABL:ARG:露出癖 == 2
	LOCAL = 100
ELSEIF ABL:ARG:露出癖 == 3
	LOCAL = 300
ELSEIF ABL:ARG:露出癖 == 4
	LOCAL = 500
ELSE
	LOCAL = 1000
ENDIF
;[おもらし癖]
SIF TALENT:ARG:おもらし癖
	TIMES LOCAL , 1.50
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:14, 13, RIGHT%LV{ABL:ARG:露出癖} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF

;ABL:サドっ気をみる
IF ABL:ARG:サドっ気 == 0
	LOCAL = 0
ELSEIF ABL:ARG:サドっ気 == 1
	LOCAL = 200
ELSEIF ABL:ARG:サドっ気 == 2
	LOCAL = 400
ELSEIF ABL:ARG:サドっ気 == 3
	LOCAL = 700
ELSEIF ABL:ARG:サドっ気 == 4
	LOCAL = 1200
ELSE
	LOCAL = 1600
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:20, 13, RIGHT%LV{ABL:ARG:サドっ気} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:マゾっ気をみる
IF ABL:ARG:マゾっ気 == 0
	LOCAL = 0
ELSEIF ABL:ARG:マゾっ気 == 1
	LOCAL = 200
ELSEIF ABL:ARG:マゾっ気 == 2
	LOCAL = 400
ELSEIF ABL:ARG:マゾっ気 == 3
	LOCAL = 700
ELSEIF ABL:ARG:マゾっ気 == 4
	LOCAL = 1200
ELSE
	LOCAL = 1600
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:21, 13, RIGHT%LV{ABL:ARG:マゾっ気} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:レズっ気・ＢＬっ気をみる
IF ABL:ARG:(22 + TALENT:ARG:オトコ) < 2
	LOCAL = 0
ELSEIF ABL:ARG:(22 + TALENT:ARG:オトコ) == 2
	LOCAL = 100
ELSEIF ABL:ARG:(22 + TALENT:ARG:オトコ) == 3
	LOCAL = 250
ELSEIF ABL:ARG:(22 + TALENT:ARG:オトコ) == 4
	LOCAL = 500
ELSE
	LOCAL = 800
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:(22 + TALENT:ARG:オトコ), 13, RIGHT%LV{ABL:ARG:(22 + TALENT:ARG:オトコ)} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF

;ABL:自慰中毒をみる
IF ABL:ARG:自慰中毒 == 0
	LOCAL = 0
ELSEIF ABL:ARG:自慰中毒 == 1
	LOCAL = 560
ELSEIF ABL:ARG:自慰中毒 == 2
	LOCAL = 850
ELSEIF ABL:ARG:自慰中毒 == 3
	LOCAL = 1400
ELSEIF ABL:ARG:自慰中毒 == 4
	LOCAL = 1900
ELSE
	LOCAL = 2700
ENDIF
;[中毒しにくい]
SIF TALENT:ARG:中毒しにくい && ABL:ARG:自慰中毒 >= 3
	TIMES LOCAL , 1.20
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:30, 13, RIGHT%LV{ABL:ARG:自慰中毒} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:精液中毒をみる
IF ABL:ARG:精液中毒 == 0
	LOCAL = 0
ELSEIF ABL:ARG:精液中毒 == 1
	LOCAL = 400
ELSEIF ABL:ARG:精液中毒 == 2
	LOCAL = 800
ELSEIF ABL:ARG:精液中毒 == 3
	LOCAL = 1200
ELSEIF ABL:ARG:精液中毒 == 4
	LOCAL = 1800
ELSE
	LOCAL = 2400
ENDIF
;[中毒しにくい]
SIF TALENT:ARG:中毒しにくい && ABL:ARG:精液中毒 >= 3
	TIMES LOCAL , 1.20
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:31, 13, RIGHT%LV{ABL:ARG:精液中毒} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:レズ中毒・ＢＬ中毒をみる
IF ABL:ARG:(32 + TALENT:ARG:オトコ) == 0
	LOCAL = 0
ELSEIF ABL:ARG:(32 + TALENT:ARG:オトコ) == 1
	LOCAL = 200
ELSEIF ABL:ARG:(32 + TALENT:ARG:オトコ) == 2
	LOCAL = 400
ELSEIF ABL:ARG:(32 + TALENT:ARG:オトコ) == 3
	LOCAL = 800
ELSEIF ABL:ARG:(32 + TALENT:ARG:オトコ) == 4
	LOCAL = 1600
ELSE
	LOCAL = 2000
ENDIF
;[中毒しにくい]
SIF TALENT:ARG:中毒しにくい && ABL:ARG:(32 + TALENT:ARG:オトコ) >= 3
	TIMES LOCAL , 1.20
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:(32 + TALENT:ARG:オトコ), 13, RIGHT%LV{ABL:ARG:(32 + TALENT:ARG:オトコ)} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:噴乳中毒をみる
IF ABL:ARG:噴乳中毒 == 0
	LOCAL = 0
ELSEIF ABL:ARG:噴乳中毒 == 1
	LOCAL = 400
ELSEIF ABL:ARG:噴乳中毒 == 2
	LOCAL = 800
ELSEIF ABL:ARG:噴乳中毒 == 3
	LOCAL = 1200
ELSEIF ABL:ARG:噴乳中毒 == 4
	LOCAL = 1800
ELSE
	LOCAL = 2200
ENDIF
;[中毒しにくい]
SIF TALENT:ARG:中毒しにくい && ABL:ARG:噴乳中毒 >= 3
	TIMES LOCAL , 1.20
IF LOCAL > 0 && TALENT:ARG:母乳体質
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:34, 13, RIGHT%LV{ABL:ARG:噴乳中毒} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:排泄中毒をみる
IF ABL:ARG:排泄中毒 == 0
	LOCAL = 0
ELSEIF ABL:ARG:排泄中毒 == 1
	LOCAL = 50
ELSEIF ABL:ARG:排泄中毒 == 2
	LOCAL = 100
ELSEIF ABL:ARG:排泄中毒 == 3
	LOCAL = 300
ELSEIF ABL:ARG:排泄中毒 == 4
	LOCAL = 500
ELSE
	LOCAL = 1000
ENDIF
;[おもらし癖]
SIF TALENT:ARG:おもらし癖
	TIMES LOCAL , 1.50
;[淫尻]
SIF TALENT:ARG:淫尻
	TIMES LOCAL , 1.50
;[尿道狂]
SIF TALENT:ARG:尿道狂
	TIMES LOCAL , 1.50
;[中毒しにくい]
SIF TALENT:ARG:中毒しにくい && ABL:ARG:排泄中毒 >= 3
	TIMES LOCAL , 1.20
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:36, 13, RIGHT%LV{ABL:ARG:排泄中毒} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:触手中毒をみる
;触手に夢中なあまり性奴隷としての価値が下がってしまうと解釈
IF ABL:ARG:触手中毒 == 0
	LOCAL = 0
ELSEIF ABL:ARG:触手中毒 == 1
	LOCAL = 100
ELSEIF ABL:ARG:触手中毒 == 2
	LOCAL = 200
ELSEIF ABL:ARG:触手中毒 == 3
	LOCAL = 400
ELSEIF ABL:ARG:触手中毒 == 4
	LOCAL = 800
ELSE
	LOCAL = 1600
ENDIF
;[中毒しにくい]
SIF TALENT:ARG:中毒しにくい && ABL:ARG:触手中毒 >= 3
	TIMES LOCAL , 0.80
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:35, 13, RIGHT%LV{ABL:ARG:触手中毒} －{LOCAL}
	LOCAL:1 -= LOCAL
ENDIF
;ABL:獣姦中毒をみる
;触手中毒と同じく異種の性器に夢中な為、価値低下
IF ABL:ARG:獣姦中毒 == 0
	LOCAL = 0
ELSEIF ABL:ARG:獣姦中毒 == 1
	LOCAL = 100
ELSEIF ABL:ARG:獣姦中毒 == 2
	LOCAL = 200
ELSEIF ABL:ARG:獣姦中毒 == 3
	LOCAL = 400
ELSEIF ABL:ARG:獣姦中毒 == 4
	LOCAL = 800
ELSE
	LOCAL = 1600
ENDIF
;[中毒しにくい]
SIF TALENT:ARG:中毒しにくい && ABL:ARG:獣姦中毒 >= 3
	TIMES LOCAL , 0.80
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:38, 13, RIGHT%LV{ABL:ARG:獣姦中毒} －{LOCAL}
	LOCAL:1 -= LOCAL
ENDIF

;ABL:料理技能をみる
IF ABL:ARG:料理技能 == 0
	LOCAL = 0
ELSEIF ABL:ARG:料理技能 == 1
	LOCAL = 200
ELSEIF ABL:ARG:料理技能 == 2
	LOCAL = 500
ELSEIF ABL:ARG:料理技能 == 3
	LOCAL = 1000
ELSEIF ABL:ARG:料理技能 == 4
	LOCAL = 1800
ELSE
	LOCAL = 3000
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:70, 13, RIGHT%LV{ABL:ARG:料理技能} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:撮影技能をみる
IF ABL:ARG:撮影技能 == 0
	LOCAL = 0
ELSEIF ABL:ARG:撮影技能 == 1
	LOCAL = 150
ELSEIF ABL:ARG:撮影技能 == 2
	LOCAL = 300
ELSEIF ABL:ARG:撮影技能 == 3
	LOCAL = 600
ELSEIF ABL:ARG:撮影技能 == 4
	LOCAL = 1400
ELSE
	LOCAL = 2000
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:71, 13, RIGHT%LV{ABL:ARG:撮影技能} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:歌唱技能をみる
IF ABL:ARG:歌唱技能 == 0
	LOCAL = 0
ELSEIF ABL:ARG:歌唱技能 == 1
	LOCAL = 200
ELSEIF ABL:ARG:歌唱技能 == 2
	LOCAL = 400
ELSEIF ABL:ARG:歌唱技能 == 3
	LOCAL = 800
ELSEIF ABL:ARG:歌唱技能 == 4
	LOCAL = 1600
ELSE
	LOCAL = 2800
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:72, 13, RIGHT%LV{ABL:ARG:歌唱技能} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF
;ABL:工作技能をみる
IF ABL:ARG:工作技能 == 0
	LOCAL = 0
ELSEIF ABL:ARG:工作技能 == 1
	LOCAL = 200
ELSEIF ABL:ARG:工作技能 == 2
	LOCAL = 400
ELSEIF ABL:ARG:工作技能 == 3
	LOCAL = 800
ELSEIF ABL:ARG:工作技能 == 4
	LOCAL = 1600
ELSE
	LOCAL = 2800
ENDIF
IF LOCAL > 0
	SIF !TFLAG:207
		PRINTFORML %ABLNAME:73, 13, RIGHT%LV{ABL:ARG:工作技能} ＋{LOCAL}
	LOCAL:1 += LOCAL
ENDIF

;MARK:同化刻印をみる
;不死性は触手に依るものなので蓬莱人や呪精のような価値は付かない
;それどころか逆に触手に依存性を持ってしまっているため、性奴隷としての価値が下がってしまう
IF MARK:ARG:同化刻印
	LOCAL = 100 * MARK:ARG:同化刻印 * MARK:ARG:同化刻印
	SIF !TFLAG:207
		PRINTFORML %MARKNAME:10, 13, RIGHT%LV{MARK:ARG:同化刻印} －{LOCAL}
	LOCAL:1 -= LOCAL
ENDIF

;売値の基礎値保存
LOCAL:3 = LOCAL:1
;倍率表示用
LOCAL:2 = 10000

;[処女]をみる
IF TALENT:ARG:処女
	LOCAL = 175
	TIMES LOCAL:1 , 1.75
	TIMES LOCAL:2 , 1.75
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:0, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[肥大陰核]をみる
IF TALENT:ARG:肥大陰核
	LOCAL = 110
	TIMES LOCAL:1 , 1.10
	TIMES LOCAL:2 , 1.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:1, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[雌雄可変]をみる
IF TALENT:ARG:雌雄可変
	LOCAL = 300
	TIMES LOCAL:1 , 3.00
	TIMES LOCAL:2 , 3.00
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:9, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[反抗的]をみる
IF TALENT:ARG:反抗的 && ABL:ARG:従順 > 4
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:11, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[気丈]をみる
IF TALENT:ARG:気丈 && ABL:ARG:従順 > 2
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:12, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[素直]をみる
IF TALENT:ARG:素直
	LOCAL = 110
	TIMES LOCAL:1 , 1.10
	TIMES LOCAL:2 , 1.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:13, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[大人しい]をみる
IF TALENT:ARG:大人しい
	LOCAL = 110
	TIMES LOCAL:1 , 1.10
	TIMES LOCAL:2 , 1.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:14, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[プライド高い]をみる
IF TALENT:ARG:プライド高い && ABL:ARG:従順 > 2
	IF ABL:ARG:従順 > 4
		LOCAL = 175
		TIMES LOCAL:1 , 1.75
		TIMES LOCAL:2 , 1.75
	ELSE
		LOCAL = 120
		TIMES LOCAL:1 , 1.20
		TIMES LOCAL:2 , 1.20
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:16, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[プライド低い]をみる
ELSEIF TALENT:ARG:プライド低い && ABL:ARG:従順 < 4
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:17, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[自制心]をみる
IF TALENT:ARG:自制心
	IF ABL:ARG:欲望 < 4 && ABL:ARG:露出癖 < 3
		LOCAL = 80
		TIMES LOCAL:1 , 0.80
		TIMES LOCAL:2 , 0.80
	ELSE
		LOCAL = 140
		TIMES LOCAL:1 , 1.40
		TIMES LOCAL:2 , 1.40
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:20, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[無関心]をみる
IF TALENT:ARG:無関心 && ABL:ARG:欲望 < 4
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:21, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[感情乏しい]をみる
IF TALENT:ARG:感情乏しい && ABL:ARG:欲望 < 4
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:22, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[好奇心]をみる
IF TALENT:ARG:好奇心
	IF ABL:ARG:欲望 < 4
		LOCAL = 120
		TIMES LOCAL:1 , 1.20
		TIMES LOCAL:2 , 1.20
	ELSE
		LOCAL = 140
		TIMES LOCAL:1 , 1.40
		TIMES LOCAL:2 , 1.40
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:23, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[保守的]をみる
IF TALENT:ARG:保守的 && ABL:ARG:欲望 < 4
	IF RELATION:ARG:MASTER >= 200
		LOCAL = 25
		TIMES LOCAL:1 , 0.25
		TIMES LOCAL:2 , 0.25
	ELSE
		LOCAL = 50
		TIMES LOCAL:1 , 0.50
		TIMES LOCAL:2 , 0.50
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:24, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[一線越えない]をみる
IF TALENT:ARG:一線越えない
	IF ABL:ARG:従順 < 4
		LOCAL = 80
		TIMES LOCAL:1 , 0.80
		TIMES LOCAL:2 , 0.80
	ELSEIF ABL:ARG:欲望 > 4
		LOCAL = 175
		TIMES LOCAL:1 , 1.75
		TIMES LOCAL:2 , 1.75
	ELSE
		LOCAL = 100
	ENDIF
	SIF LOCAL != 100 && !TFLAG:207
		PRINTFORML %TALENTNAME:27, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[貞操観念]をみる
IF TALENT:ARG:貞操観念
	IF ABL:ARG:欲望 > 4 && TALENT:ARG:処女
		LOCAL = 150
		TIMES LOCAL:1 , 1.50
		TIMES LOCAL:2 , 1.50
	ELSEIF ABL:ARG:欲望 < 3
		LOCAL = 120
		TIMES LOCAL:1 , 1.20
		TIMES LOCAL:2 , 1.20
	ELSE
		LOCAL = 100
	ENDIF
	SIF LOCAL != 100 && !TFLAG:207
		PRINTFORML %TALENTNAME:30, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[貞操無頓着]をみる
ELSEIF TALENT:ARG:貞操無頓着 && TALENT:ARG:処女 == 0 && TALENT:ARG:オトコ == 0
	IF TALENT:ARG:淫乱 || TALENT:ARG:淫魔
		LOCAL = 120
		TIMES LOCAL:1 , 1.20
		TIMES LOCAL:2 , 1.20
	ELSEIF ABL:ARG:欲望 < 4
		LOCAL = 80
		TIMES LOCAL:1 , 0.80
		TIMES LOCAL:2 , 0.80
	ELSE
		LOCAL = 100
	ENDIF
	SIF LOCAL != 100 && !TFLAG:207
		PRINTFORML %TALENTNAME:31, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[解放]をみる
IF TALENT:ARG:解放
	IF ((ABL:ARG:Ｖ感覚 >= 5 || TALENT:ARG:オトコ) && ABL:ARG:Ａ感覚 >= 5 && ABL:ARG:露出癖 >= 4) || TALENT:ARG:淫魔
		LOCAL = 175
		TIMES LOCAL:1 , 1.75
		TIMES LOCAL:2 , 1.75
	ELSEIF ((ABL:ARG:Ｖ感覚 >= 5 || TALENT:ARG:オトコ) && ABL:ARG:Ａ感覚 >= 5) || CFLAG:ARG:13 & 1
		LOCAL = 120
		TIMES LOCAL:1 , 1.20
		TIMES LOCAL:2 , 1.20
	ELSEIF ABL:ARG:Ｖ感覚 < 3 || ABL:ARG:Ａ感覚 < 3 || ABL:ARG:露出癖 < 3 || MARK:ARG:薬物刻印 > 0 || MARK:ARG:恐怖刻印 > 0 || MARK:ARG:反発刻印 > 0
		LOCAL = 70
		TIMES LOCAL:1 , 0.70
		TIMES LOCAL:2 , 0.70
	ELSE
		LOCAL = 100
	ENDIF
	SIF LOCAL != 100 && !TFLAG:207
		PRINTFORML %TALENTNAME:33, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[抵抗]をみる
IF TALENT:ARG:抵抗 && ABL:ARG:従順 > 3
	IF ABL:ARG:従順 > 4 && ABL:ARG:露出癖 > 4
		LOCAL = 180
		TIMES LOCAL:1 , 1.80
		TIMES LOCAL:2 , 1.80
	ELSE
		LOCAL = 130
		TIMES LOCAL:1 , 1.30
		TIMES LOCAL:2 , 1.30
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:34, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ELSEIF TALENT:ARG:抵抗 == 0 && CFLAG:ARG:13 & 2
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:34, 12, RIGHT%消失 ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[痛みに弱い]をみる
IF TALENT:ARG:痛みに弱い
	LOCAL = 75
	TIMES LOCAL:1 , 0.75
	TIMES LOCAL:2 , 0.75
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:40, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[痛みに強い]をみる
ELSEIF TALENT:ARG:痛みに強い
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:41, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[濡れやすい]をみる
IF TALENT:ARG:濡れやすい
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:42, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[濡れにくい]をみる
ELSEIF TALENT:ARG:濡れにくい
	LOCAL = 90
	TIMES LOCAL:1 , 0.90
	TIMES LOCAL:2 , 0.90
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:43, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[媚薬中毒]をみる
IF TALENT:ARG:媚薬中毒
	IF TALENT:ARG:淫乱
		LOCAL = 50
		TIMES LOCAL:1 , 0.50
		TIMES LOCAL:2 , 0.50
	ELSE
		LOCAL = 150
		TIMES LOCAL:1 , 1.50
		TIMES LOCAL:2 , 1.50
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:46, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[喘息]をみる
IF TALENT:ARG:喘息
	LOCAL = 60
	TIMES LOCAL:1 , 0.60
	TIMES LOCAL:2 , 0.60
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:47, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[舌使い]をみる
IF TALENT:ARG:舌使い
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:52, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[針さばき]をみる
IF TALENT:ARG:針さばき
	IF TALENT:ARG:ドＳ
		LOCAL = 125
		TIMES LOCAL:1 , 1.25
		TIMES LOCAL:2 , 1.25
	ELSEIF TALENT:ARG:サド || ABL:ARG:サドっ気 >= 5
		LOCAL = 110
		TIMES LOCAL:1 , 1.10
		TIMES LOCAL:2 , 1.10
	ELSE
		LOCAL = 100
	ENDIF
	SIF LOCAL != 100 && !TFLAG:207
		PRINTFORML %TALENTNAME:53, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[調合知識]をみる
IF TALENT:ARG:調合知識
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:55, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[禁断の知識]をみる
IF TALENT:ARG:禁断の知識
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:56, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[治療]をみる
IF TALENT:ARG:治療
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:59, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[献身的]をみる
IF TALENT:ARG:献身的
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:63, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[パイパン]をみる
IF TALENT:ARG:パイパン
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:65, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[精愛味覚]をみる
IF TALENT:ARG:精愛味覚
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:66, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[快感に素直]をみる
IF TALENT:ARG:快感に素直 && ABL:ARG:欲望 < 4
	LOCAL = 60
	TIMES LOCAL:1 , 0.60
	TIMES LOCAL:2 , 0.60
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:70, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[快感の否定]をみる
ELSEIF TALENT:ARG:快感の否定 && ABL:ARG:欲望 > 3
	IF ABL:ARG:欲望 > 4
		LOCAL = 240
		TIMES LOCAL:1 , 2.40
		TIMES LOCAL:2 , 2.40
	ELSE
		LOCAL = 180
		TIMES LOCAL:1 , 1.80
		TIMES LOCAL:2 , 1.80
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:71, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[倒錯的]をみる
IF TALENT:ARG:倒錯的 && ABL:ARG:欲望 > 3
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:80, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[両刀]をみる
IF TALENT:ARG:両刀 && ((ABL:ARG:レズっ気 >= 5 && ABL:ARG:レズ中毒 >= 3 && TALENT:ARG:オトコ == 0) || (ABL:ARG:ＢＬっ気 >= 5 && ABL:ARG:ＢＬ中毒 >= 3 && TALENT:ARG:オトコ))
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:83, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[中毒しにくい]をみる
IF TALENT:ARG:中毒しにくい
	LOCAL = (TALENT:ARG:オトコ == 0) ? ABL:ARG:レズ中毒 # ABL:ARG:ＢＬ中毒
	IF ABL:ARG:自慰中毒 + ABL:ARG:精液中毒 + LOCAL + ABL:ARG:噴乳中毒 + ABL:ARG:触手中毒 + ABL:ARG:排泄中毒 + ABL:ARG:射精中毒 >= 10
		LOCAL = 120
		TIMES LOCAL:1 , 1.20
		TIMES LOCAL:2 , 1.20
	ELSEIF ABL:ARG:自慰中毒 >= 3 || ABL:ARG:精液中毒 >= 3 || LOCAL >= 3 || ABL:ARG:噴乳中毒 >= 3 || ABL:ARG:触手中毒 >= 3 || ABL:ARG:排泄中毒 >= 3 || ABL:ARG:射精中毒 >= 3
		LOCAL = 100
	ELSE
		LOCAL = 60
		TIMES LOCAL:1 , 0.60
		TIMES LOCAL:2 , 0.60
	ENDIF
	SIF LOCAL != 100 && !TFLAG:207
		PRINTFORML %TALENTNAME:85, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[魅力]をみる
IF TALENT:ARG:魅力
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:90, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[魅惑]をみる
IF TALENT:ARG:魅惑
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:91, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[謎の魅力]をみる
IF TALENT:ARG:謎の魅力
	LOCAL = 200
	TIMES LOCAL:1 , 2.00
	TIMES LOCAL:2 , 2.00
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:92, 16, RIGHT% ×2.00
ENDIF
;[小悪魔]をみる
IF TALENT:ARG:小悪魔
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:93, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[人気]をみる
IF TALENT:ARG:人気
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:94, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[Ｃ鈍感]をみる
IF TALENT:ARG:Ｃ鈍感 && ABL:ARG:Ｃ感覚 < 4
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:101, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[Ｃ過敏]をみる
ELSEIF TALENT:ARG:Ｃ敏感 && ABL:ARG:Ｃ感覚 >= 5
	LOCAL = 115
	TIMES LOCAL:1 , 1.15
	TIMES LOCAL:2 , 1.15
	SIF !TFLAG:207
		PRINTFORML           Ｃ過敏 ×{LOCAL/100}.{LOCAL%100}
;[Ｃ敏感]をみる
ELSEIF TALENT:ARG:Ｃ敏感 && ABL:ARG:Ｃ感覚 > 2
	LOCAL = 110
	TIMES LOCAL:1 , 1.10
	TIMES LOCAL:2 , 1.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:100, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[Ｖ鈍感]をみる
IF TALENT:ARG:Ｖ鈍感 && ABL:ARG:Ｖ感覚 < 4
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:103, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[Ｖ過敏]をみる
ELSEIF TALENT:ARG:Ｖ敏感 && ABL:ARG:Ｖ感覚 >= 5
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	SIF !TFLAG:207
		PRINTFORML           Ｖ過敏 ×{LOCAL/100}.{LOCAL%100}
;[Ｖ敏感]をみる
ELSEIF TALENT:ARG:Ｖ敏感 && ABL:ARG:Ｖ感覚 > 2
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:102, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[Ａ鈍感]をみる
IF TALENT:ARG:Ａ鈍感 && ABL:ARG:Ａ感覚 < 4
	LOCAL = 90
	TIMES LOCAL:1 , 0.90
	TIMES LOCAL:2 , 0.90
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:105, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[Ａ過敏]をみる
ELSEIF TALENT:ARG:Ａ敏感 && ABL:ARG:Ａ感覚 >= 5
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML           Ａ過敏 ×{LOCAL/100}.{LOCAL%100}
;[Ａ敏感]をみる
ELSEIF TALENT:ARG:Ａ敏感 && ABL:ARG:Ａ感覚 > 2
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:104, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[Ｂ鈍感]をみる
IF TALENT:ARG:Ｂ鈍感 && ABL:ARG:Ｂ感覚 < 4
	LOCAL = 85
	TIMES LOCAL:1 , 0.85
	TIMES LOCAL:2 , 0.85
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:107, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[Ｂ過敏]をみる
ELSEIF TALENT:ARG:Ｂ敏感 && ABL:ARG:Ｂ感覚 >= 5
	LOCAL = 115
	TIMES LOCAL:1 , 1.15
	TIMES LOCAL:2 , 1.15
	SIF !TFLAG:207
		PRINTFORML           Ｂ過敏 ×{LOCAL/100}.{LOCAL%100}
;[Ｂ敏感]をみる
ELSEIF TALENT:ARG:Ｂ敏感 && ABL:ARG:Ｂ感覚 > 2
	LOCAL = 110
	TIMES LOCAL:1 , 1.10
	TIMES LOCAL:2 , 1.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:106, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[動物耳]をみる
IF TALENT:ARG:動物耳
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:116, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[オトコ]をみる
IF TALENT:ARG:オトコ
	IF BASE:ARG:体力 >= 3000 && BASE:ARG:気力 >= 2000
		LOCAL = 250
		TIMES LOCAL:1 , 2.50
		TIMES LOCAL:2 , 2.50
	ELSEIF ABL:ARG:従順 > 3 && ABL:ARG:欲望 > 3 && ABL:ARG:ＢＬっ気 > 2
		LOCAL = 200
		TIMES LOCAL:1 , 2.00
		TIMES LOCAL:2 , 2.00
	ELSEIF ABL:ARG:従順 > 2 && ABL:ARG:欲望 > 2 && ABL:ARG:ＢＬっ気 > 1
		LOCAL = 150
		TIMES LOCAL:1 , 1.50
		TIMES LOCAL:2 , 1.50
	ELSEIF ABL:ARG:従順 > 1 && ABL:ARG:欲望 > 1 && ABL:ARG:ＢＬっ気
		LOCAL = 125
		TIMES LOCAL:1 , 1.25
		TIMES LOCAL:2 , 1.25
	ELSE
		LOCAL = 110
		TIMES LOCAL:1 , 1.10
		TIMES LOCAL:2 , 1.10
	ENDIF
	LOCALS = いい%TALENTNAME:120%
	IF !TFLAG:207
		PRINTFORM %LOCALS, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
		SIF LOCAL % 100 == 0
			PRINT 0
		PRINTL 
	ENDIF
ENDIF
;[ふたなり]をみる
IF TALENT:ARG:ふたなり
	LOCAL = 110
	TIMES LOCAL:1 , 1.10
	TIMES LOCAL:2 , 1.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:121, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[具現]をみる
ELSEIF TALENT:ARG:具現
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:123, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;ペニスサイズの補正
IF TALENT:ARG:オトコ || TALENT:ARG:ふたなり
	IF FLAG:1500 & 1
		IF BASE:ARG:16 == 1
			LOCAL = 50
			TIMES LOCAL:1 , 0.50
			TIMES LOCAL:2 , 0.50
			LOCALS = マイクロペニス
			SIF !TFLAG:207
				PRINTFORML %LOCALS, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
		ELSEIF BASE:ARG:16 == 2
			LOCAL = 80
			TIMES LOCAL:1 , 0.80
			TIMES LOCAL:2 , 0.80
			LOCALS = ポークビッツ
			SIF !TFLAG:207
				PRINTFORML %LOCALS, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
		ELSEIF BASE:ARG:16 == 6
			LOCAL = 120
			TIMES LOCAL:1 , 1.20
			TIMES LOCAL:2 , 1.20
			LOCALS = 巨根
			SIF !TFLAG:207
				PRINTFORML %LOCALS, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
		ELSEIF BASE:ARG:16 == 7
			LOCAL = 150
			TIMES LOCAL:1 , 1.50
			TIMES LOCAL:2 , 1.50
			LOCALS = 第３の足
			SIF !TFLAG:207
				PRINTFORML %LOCALS, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
		ENDIF
	ENDIF
ENDIF
;[狂気の目]をみる
IF TALENT:ARG:狂気の目
	LOCAL = 200
	TIMES LOCAL:1 , 2.00
	TIMES LOCAL:2 , 2.00
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:125, 16, RIGHT% ×2.00
ENDIF
;[母乳体質]をみる
IF TALENT:ARG:母乳体質
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:134, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[卵生]をみる
IF TALENT:ARG:卵生
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:135, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[産卵体質]をみる
ELSEIF TALENT:ARG:産卵体質
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:136, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[回復早い]をみる
IF TALENT:ARG:回復早い
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:137, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[回復遅い]をみる
ELSEIF TALENT:ARG:回復遅い
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:138, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[変幻自在]をみる
IF TALENT:ARG:変幻自在
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:139, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[音痴]をみる
IF TALENT:ARG:音痴
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:190, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[音感]をみる
ELSEIF TALENT:ARG:音感
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:191, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[料理苦手]をみる
IF TALENT:ARG:料理苦手
	LOCAL = 75
	TIMES LOCAL:1 , 0.75
	TIMES LOCAL:2 , 0.75
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:192, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[料理得意]をみる
ELSEIF TALENT:ARG:料理得意
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:193, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[調理名人]をみる
ELSEIF TALENT:ARG:調理名人
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:194, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[魔術技能]をみる
IF TALENT:ARG:魔術技能
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:197, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[蓬莱人]をみる
IF TALENT:ARG:蓬莱人
	LOCAL = 300
	TIMES LOCAL:1 , 3.00
	TIMES LOCAL:2 , 3.00
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:49, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[呪精]をみる
ELSEIF TALENT:ARG:呪精
	LOCAL = 180
	TIMES LOCAL:1 , 1.80
	TIMES LOCAL:2 , 1.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:48, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[吸血鬼]をみる
IF TALENT:ARG:吸血鬼
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:205, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[人形]をみる
IF TALENT:ARG:人形
	LOCAL = 110
	TIMES LOCAL:1 , 1.10
	TIMES LOCAL:2 , 1.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:208, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[河童]をみる
IF TALENT:ARG:河童
	LOCAL = 115
	TIMES LOCAL:1 , 1.15
	TIMES LOCAL:2 , 1.15
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:210, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[妖狐]をみる
IF TALENT:ARG:妖狐
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:211, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[覚]をみる
IF TALENT:ARG:覚
	IF TALENT:ARG:覚 == 2
		LOCAL = 110
		TIMES LOCAL:1 , 1.10
		TIMES LOCAL:2 , 1.10
	ELSE
		LOCAL = 130
		TIMES LOCAL:1 , 1.30
		TIMES LOCAL:2 , 1.30
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:213, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[鬼]をみる
IF TALENT:ARG:鬼
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:214, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[天狗]をみる
IF TALENT:ARG:天狗
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:215, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[鵺]をみる
IF TALENT:ARG:鵺
	LOCAL = 400
	TIMES LOCAL:1 , 4.00
	TIMES LOCAL:2 , 4.00
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:217, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[博麗の巫女]をみる
IF TALENT:ARG:博麗の巫女
	LOCAL = 150
	TIMES LOCAL:1 , 1.50
	TIMES LOCAL:2 , 1.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:218, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[風祝]をみる
IF TALENT:ARG:風祝
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:219, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[爆発物]をみる
IF TALENT:ARG:爆発物
	LOCAL = 75
	TIMES LOCAL:1 , 0.75
	TIMES LOCAL:2 , 0.75
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:220, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[仙人]をみる
IF TALENT:ARG:仙人
	IF ABL:ARG:欲望 >= 5
		LOCAL = 75
		TIMES LOCAL:1 , 0.75
		TIMES LOCAL:2 , 0.75
	ELSE
		LOCAL = 150
		TIMES LOCAL:1 , 1.50
		TIMES LOCAL:2 , 1.50
	ENDIF
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:225, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[キョンシー]をみる
IF TALENT:ARG:キョンシー && ABL:ARG:マゾっ気 >= 5
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:226, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[化け狸]をみる
IF TALENT:ARG:化け狸
	LOCAL = 130
	TIMES LOCAL:1 , 1.30
	TIMES LOCAL:2 , 1.30
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:227, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[人魚]をみる
IF TALENT:ARG:人魚
	LOCAL = 140
	TIMES LOCAL:1 , 1.40
	TIMES LOCAL:2 , 1.40
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:228, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[人狼]をみる
IF TALENT:ARG:人狼
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:229, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[娼婦]をみる
IF TALENT:ARG:娼婦
	LOCAL = 120
	TIMES LOCAL:1 , 1.20
	TIMES LOCAL:2 , 1.20
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:260, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[淫魔]をみる
IF TALENT:ARG:淫魔
	LOCAL = 250
	TIMES LOCAL:1 , 2.50
	TIMES LOCAL:2 , 2.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:180, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[淫乱]をみる
ELSEIF TALENT:ARG:淫乱
	LOCAL = 110
	TIMES LOCAL:1 , 1.10
	TIMES LOCAL:2 , 1.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:170, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[即落ち]をみる
IF TALENT:ARG:即落ち
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:179, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[相愛]をみる
IF TALENT:ARG:相愛
	LOCAL = 50
	TIMES LOCAL:1 , 0.50
	TIMES LOCAL:2 , 0.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:153, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[親愛]をみる
ELSEIF TALENT:ARG:親愛
	LOCAL = 60
	TIMES LOCAL:1 , 0.60
	TIMES LOCAL:2 , 0.60
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:152, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[精神崩壊]をみる
IF TALENT:ARG:精神崩壊
	LOCAL = 25
	TIMES LOCAL:1 , 0.25
	TIMES LOCAL:2 , 0.25
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:167, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
;[狂気]をみる
ELSEIF TALENT:ARG:狂気
	LOCAL = 50
	TIMES LOCAL:1 , 0.50
	TIMES LOCAL:2 , 0.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:158, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[傷物]をみる
IF TALENT:ARG:傷物
	LOCAL = 50
	TIMES LOCAL:1 , 0.50
	TIMES LOCAL:2 , 0.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:163, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF
;[傀儡]をみる
IF TALENT:ARG:傀儡
	LOCAL = 50
	TIMES LOCAL:1 , 0.50
	TIMES LOCAL:2 , 0.50
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:168, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;[理性]をみる
IF TALENT:ARG:理性
	LOCAL = MAX(25 + BASE:ARG:理性 / 120, 110)
	LOCAL:1 *= LOCAL
	LOCAL:1 /= 100
	LOCAL:2 *= LOCAL
	LOCAL:2 /= 100
	IF !TFLAG:207
		PRINTFORM %TALENTNAME:500, 16, RIGHT% ×{LOCAL/100}.
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORML 0{LOCAL%100}
		ELSE
			PRINTFORML {LOCAL%100}
		ENDIF
	ENDIF
ENDIF
;[調教度]をみる
IF EXP:ARG:別人調教経験 || EXP:ARG:主人調教経験
	LOCAL = MAX(100 + CFLAG:ARG:3668 / 40, 75)
	LOCAL:1 *= LOCAL
	LOCAL:1 /= 100
	LOCAL:2 *= LOCAL
	LOCAL:2 /= 100
	IF LOCAL > 0 && !TFLAG:207
		PRINTFORM           調教度 ×{LOCAL/100}.
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORML 0{LOCAL%100}
		ELSE
			PRINTFORML {LOCAL%100}
		ENDIF
	ENDIF
ENDIF

;クリトリスリング
IF CFLAG:ARG:42 & 1
	LOCAL = 85
	TIMES LOCAL:1 , 0.85
	TIMES LOCAL:2 , 0.85
	SIF !TFLAG:207
		PRINTFORML クリトリスリング ×{LOCAL/100}.{LOCAL%100}
ENDIF
;ニプルピアス
IF CFLAG:ARG:42 & 32
	LOCAL = 90
	TIMES LOCAL:1 , 0.90
	TIMES LOCAL:2 , 0.90
	SIF !TFLAG:207
		PRINTFORML 　　ニプルピアス ×{LOCAL/100}.{LOCAL%100}
ENDIF
;ラビアピアス
IF CFLAG:ARG:42 & 16
	LOCAL = 80
	TIMES LOCAL:1 , 0.80
	TIMES LOCAL:2 , 0.80
	SIF !TFLAG:207
		PRINTFORML 　　ラビアピアス ×{LOCAL/100}.{LOCAL%100}
ENDIF

;にんっしんっしている
IF TALENT:ARG:妊娠
	LOCAL:1 /= 4
	LOCAL:2 /= 4
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:140, 16, RIGHT% ×0.25
;御懐卵している
ELSEIF TALENT:ARG:懐卵
	LOCAL:1 /= 4
	LOCAL:2 /= 4
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:145, 16, RIGHT% ×0.25
ENDIF

;[死亡]をみる
IF TALENT:ARG:死亡
	LOCAL = 10
	TIMES LOCAL:1 , 0.10
	TIMES LOCAL:2 , 0.10
	SIF !TFLAG:207
		PRINTFORML %TALENTNAME:800, 16, RIGHT% ×{LOCAL/100}.{LOCAL%100}
ENDIF

;☆複合倍率
LOCAL:5 = 0
;敏感数
SIF TALENT:ARG:Ｃ敏感
	LOCAL:5 += 1
SIF TALENT:ARG:Ｃ鈍感
	LOCAL:5 -= 1
SIF TALENT:ARG:Ｖ敏感
	LOCAL:5 += 1
SIF TALENT:ARG:Ｖ鈍感
	LOCAL:5 -= 1
SIF TALENT:ARG:Ａ敏感
	LOCAL:5 += 1
SIF TALENT:ARG:Ａ鈍感
	LOCAL:5 -= 1
SIF TALENT:ARG:Ｂ敏感
	LOCAL:5 += 1
;敏感体質
IF LOCAL:5 >= 1
	SELECTCASE LOCAL:5
		CASE 1
			LOCAL = 110
			TIMES LOCAL:1 , 1.10
			TIMES LOCAL:2 , 1.10
		CASE 2
			LOCAL = 115
			TIMES LOCAL:1 , 1.15
			TIMES LOCAL:2 , 1.15
		CASE 3
			LOCAL = 120
			TIMES LOCAL:1 , 1.20
			TIMES LOCAL:2 , 1.20
		CASE 4
			LOCAL = 125
			TIMES LOCAL:1 , 1.25
			TIMES LOCAL:2 , 1.25
	ENDSELECT
	IF !TFLAG:207
		PRINTFORM         敏感体質 ×{LOCAL/100}.
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORM 0{LOCAL%100}
		ELSE
			PRINTFORM {LOCAL%100}
		ENDIF
		PRINTL 　　☆複合補正
	ENDIF
ENDIF

;お嬢様気質
IF TALENT:ARG:気丈 && TALENT:ARG:生意気 && TALENT:ARG:プライド高い
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	IF !TFLAG:207
		IF TALENT:ARG:オトコ
			PRINTFORM   お坊ちゃん気質 ×{LOCAL/100}.
		ELSE
			PRINTFORM       お嬢様気質 ×{LOCAL/100}.
		ENDIF
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORM 0{LOCAL%100}
		ELSE
			PRINTFORM {LOCAL%100}
		ENDIF
		PRINTL 　　☆複合補正
	ENDIF
ENDIF

;薄倖なる鳥篭
IF TALENT:ARG:臆病 && TALENT:ARG:悲観的 && TALENT:ARG:抑圧
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	IF !TFLAG:207
		PRINTFORM     薄倖なる鳥篭 ×{LOCAL/100}.
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORM 0{LOCAL%100}
		ELSE
			PRINTFORM {LOCAL%100}
		ENDIF
		PRINTL 　　☆複合補正
	ENDIF
ENDIF

;愛玩用動物
IF (TALENT:ARG:小人体型 || TALENT:ARG:小柄体型) && TALENT:ARG:動物耳 && MARK:ARG:屈服刻印 == 3
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	IF !TFLAG:207
		PRINTFORM       愛玩用動物 ×{LOCAL/100}.
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORM 0{LOCAL%100}
		ELSE
			PRINTFORM {LOCAL%100}
		ENDIF
		PRINTL 　　☆複合補正
	ENDIF
ENDIF

;廃棄用特殊検体
IF TALENT:ARG:狂気 && TALENT:ARG:精神崩壊
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	IF !TFLAG:207
		PRINTFORM   廃棄用特殊検体 ×{LOCAL/100}.
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORM 0{LOCAL%100}
		ELSE
			PRINTFORM {LOCAL%100}
		ENDIF
		PRINTL 　　☆複合補正
	ENDIF
ENDIF

;低年齢特殊性向
IF (TALENT:ARG:小人体型 || TALENT:ARG:小柄体型) && TALENT:ARG:幼児 && TALENT:ARG:幼稚
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	IF !TFLAG:207
		PRINTFORM   低年齢特殊性向 ×{LOCAL/100}.
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORM 0{LOCAL%100}
		ELSE
			PRINTFORM {LOCAL%100}
		ENDIF
		PRINTL 　　☆複合補正
	ENDIF
ENDIF

;淫乱娼婦
IF (TALENT:ARG:快感に素直 || TALENT:ARG:魅力) && TALENT:ARG:淫乱 && TALENT:ARG:娼婦
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	IF !TFLAG:207
		IF TALENT:ARG:オトコ
			PRINTFORM         淫乱男娼 ×{LOCAL/100}.
		ELSE
			PRINTFORM         淫乱娼婦 ×{LOCAL/100}.
		ENDIF
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORM 0{LOCAL%100}
		ELSE
			PRINTFORM {LOCAL%100}
		ENDIF
		PRINTL 　　☆複合補正
	ENDIF
ENDIF

;ＮＴＬ
IF TALENT:ARG:思い人あり || TALENT:ARG:彼氏あり || TALENT:ARG:旦那あり || TALENT:ARG:親愛 || (TALENT:ARG:恋慕 && !TALENT:ARG:淫乱 && ABL:ARG:触手中毒 == 0 && ABL:ARG:獣姦中毒 == 0 && !EXP:ARG:売春経験 && !EXP:ARG:娼館人気 && !EXP:ARG:被強姦経験 && !EXP:ARG:被輪姦経験 && !EXP:ARG:別人調教経験)
	LOCAL = 125
	TIMES LOCAL:1 , 1.25
	TIMES LOCAL:2 , 1.25
	IF !TFLAG:207
		IF TALENT:ARG:オトコ
			PRINTFORM   ＮＴＲ特殊性向 ×{LOCAL/100}.
		ELSE
			PRINTFORM   ＮＴＬ特殊性向 ×{LOCAL/100}.
		ENDIF
		IF (LOCAL - 100) >= 0 && (LOCAL - 100) < 10
			PRINTFORM 0{LOCAL%100}
		ELSE
			PRINTFORM {LOCAL%100}
		ENDIF
		PRINTL 　　☆複合補正
	ENDIF
ENDIF

;助手を売る
IF ISASSI:ARG && EXP:ARG:助手経験 < EXPLV:5
	LOCAL:1 /= 2
	LOCAL:2 /= 2
	SIF !TFLAG:207
		PRINTFORML 　　　　　元助手 ×0.50
ENDIF

;中古
IF CFLAG:ARG:454 > 0
	LOCAL:1 /= 2
	LOCAL:2 /= 2
	SIF !TFLAG:207
		PRINTFORML 　　　　　中古品 ×0.50
ENDIF

;[拒絶]をみる
SIF TALENT:ARG:拒絶 && !TFLAG:207
	PRINTFORML %TALENTNAME:830, 16, RIGHT% ×1.00

;売値補正(HARD以上かNORMAL以下で内容が違う)
IF FLAG:3 >= 3
	LOCAL:1 = PRICE_LIMIT_HARD(ARG, LOCAL:1)
ELSE
	LOCAL:1 = PRICE_LIMIT_NORMAL(ARG, LOCAL:1)
ENDIF

;主人の調教師LV
SELECTCASE ABL:MASTER:調教師Lv
	CASE 0
		LOCAL = 100
	CASE 1
		LOCAL = 130
		TIMES LOCAL:1 , 1.30
	CASE 2
		LOCAL = 160
		TIMES LOCAL:1 , 1.60
	CASE 3
		LOCAL = 190
		TIMES LOCAL:1 , 1.90
	CASE 4
		LOCAL = 220
		TIMES LOCAL:1 , 2.20
	CASEELSE
		LOCAL = 250
		TIMES LOCAL:1 , 2.50
ENDSELECT
IF LOCAL != 100 && !TFLAG:207
	PRINTFORM  主人の%ABLNAME:99%{ABL:MASTER:調教師Lv} ×{LOCAL/100}.{LOCAL%100}
	SIF LOCAL%100 == 0
		PRINT 0
	PRINTL 
ENDIF

;YASAIモードのキャラ限定
IF ((NO:ARG == 5001 || NO:ARG == 5003 || (NO:ARG == 1001 && CFLAG:ARG:0 == 2)) && NO:MASTER == 5000 && (FLAG:570 & 4) == 0) || FLAG:570 & 2
	TIMES LOCAL:1 , 0.50
	SIF !TFLAG:207
		PRINTFORML 　　　仲介人不在 ×0.50
ENDIF

;値が欲しい場合に備えて保存
RESULT:1 = LOCAL:3
RESULT:2 = LOCAL:2
RETURN LOCAL:1

;-------------------------------------------------
;売値補正(HARD以上)
;-------------------------------------------------
;HARDモード以上は売値に限界値が設定されている(ただしNORMAL以下のような補正はかからない)
;一文字変数Vを売値限界値に、LOCALを該当難易度の期限日数に使用
@PRICE_LIMIT_HARD(ARG, ARG:1)
#FUNCTION
SELECTCASE FLAG:3
	CASE 3
		LOCAL = 90
	CASE 4
		LOCAL = 80
	CASE 5
		LOCAL = 70
	CASE 6
		LOCAL = 50
	CASE 7
		LOCAL = 40
	CASEELSE
		LOCAL = 1000
ENDSELECT
SIF LOCAL < 1000 && FLAG:6 == 1
	LOCAL += 5
LOCALS:0 = 難易度%DISPLAY_DIFFICULTY(FLAG:3)%

;元の売値次第で売値の限界値が決定
SELECTCASE ARG:1
	CASE IS > 2000000
		LOCAL:1 = 1000000
	CASE IS > 1000000
		LOCAL:1 = 750000
	CASE IS > 750000
		LOCAL:1 = 500000
	CASEELSE
		LOCAL:1 = 250000
ENDSELECT
;汎用キャラ(娘含む)は売値限界値が低下
SIF (NO:ARG >= 3000 && NO:ARG < 3999) || NO:ARG == 2048 || NO:ARG == 2049
	TIMES LOCAL:1 , 0.75
;売値が限界値を超えていたら修正
IF ARG:1 > LOCAL:1
	ARG:1= LOCAL:1
	SIF !TFLAG:207
		PRINTFORML %LOCALS:0, 16, RIGHT%：Counter Stop! {LOCAL:1}圓
ENDIF

SIF FLAG:3 == 6 || FLAG:3 == 7
	RETURNF 0

;日数ボーナス(限界補正後に適応される)
SELECTCASE DAY
	CASE IS < 6
		TIMES ARG:1 , 1.80
		LOCALS:1 = 1.80
	CASE IS < 11
		TIMES ARG:1 , 1.30
		LOCALS:1 = 1.30
	CASE IS < LOCAL / 2
		TIMES ARG:1 , 1.00
		LOCALS:1 = 1.00
	CASE IS < LOCAL * 3 / 4
		TIMES ARG:1 , 0.80
		LOCALS:1 = 0.80
	CASE IS < LOCAL
		TIMES ARG:1 , 0.60
		LOCALS:1 = 0.60
	CASEELSE
		LOCALS:1 = 1.00
ENDSELECT
SIF !TFLAG:207
	PRINTFORML 　　日数ボーナス ×%LOCALS:1%

RETURNF ARG:1

;-------------------------------------------------
;売値補正(NORMAL以下)
;-------------------------------------------------
;NORMAL以下は売値が一定値を超えると補正がかかる
@PRICE_LIMIT_NORMAL(ARG, ARG:1)
#FUNCTION
;汎用キャラ(娘含む)
LOCAL = ARG:1
IF (NO:ARG >= 3000 && NO:ARG < 3999) || NO:ARG == 2048 || NO:ARG == 2049
	ARG:1 = TABLE_CALC2(ARG:1, 500000, 50)
	ARG:1 = TABLE_CALC2(ARG:1, 750000, 50)
	ARG:1 = TABLE_CALC2(ARG:1, 1000000, 40)
	ARG:1 = TABLE_CALC2(ARG:1, 5000000, 50)
	TIMES ARG:1 , 0.75
	LOCALS = 無名
;原作キャラ(旧作/西方キャラも含む)
ELSE
	ARG:1 = TABLE_CALC2(ARG:1, 500000, 50)
	ARG:1 = TABLE_CALC2(ARG:1, 750000, 50)
	ARG:1 = TABLE_CALC2(ARG:1, 1000000, 40)
	ARG:1 = TABLE_CALC2(ARG:1, 5000000, 50)
	LOCALS = 有名
ENDIF
LOCAL -= ARG:1
SIF LOCAL > 0
	PRINTFORML       %LOCALS%キャラ －{LOCAL}
	;%NAME:ARG%：

RETURNF ARG:1

;-------------------------------------------------
;刻符
;-------------------------------------------------
;タイムボーナスパッチの機能を一部改編
@TIME_LIMIT_BONUS, ARG, ARG:1 = 0
LOCAL = 0
LOCAL:2 = 0
LOCAL:3 = ARG:1 / 100000
REPEAT 74
	IF ABL:ARG:COUNT >= 5
		LOCAL += 2
	ELSEIF ABL:ARG:COUNT == 4
		LOCAL += 1
	ELSEIF ABL:ARG:COUNT == 3 && GROUPMATCH(COUNT, 30, 31, 32, 33, 34, 35, 36, 37, 38)
		LOCAL:2 += 5
	ELSEIF ABL:ARG:COUNT == 2 && GROUPMATCH(COUNT, 30, 31, 32, 33, 34, 35, 36, 37, 38)
		LOCAL:2 += 3
	ELSEIF ABL:ARG:COUNT == 3
		LOCAL:2 += 4
	ELSEIF ABL:ARG:COUNT == 2 || (ABL:ARG:COUNT == 1 && GROUPMATCH(COUNT, 30, 31, 32, 33, 34, 35, 36, 37, 38))
		LOCAL:2 += 2
	ENDIF
	IF LOCAL:2 >= 12
		LOCAL += 1
		LOCAL:2 -= 12
	ENDIF
REND
SIF LOCAL:2 >= 6
	LOCAL += 1
LOCAL /= 2
SIF TALENT:ARG:死亡
	LOCAL /= 2
LOCAL += LOCAL:3

;タイムボーナス
IF LOCAL
	PRINTFORMW 結果、{LOCAL}枚の刻符を得ました。
	FLAG:999 += LOCAL
	;DAY = MAX(DAY - LOCAL, 1)
ENDIF
